[gd_scene load_steps=28 format=3 uid="uid://cgqldht5h0lp7"]

[ext_resource type="Script" path="res://Scripts/rhythm_game_screen.gd" id="1_u1iya"]
[ext_resource type="Resource" uid="uid://dvocg8glldoo7" path="res://Levels/tutorial.tres" id="2_anosn"]
[ext_resource type="Texture2D" uid="uid://d2jh7t550a7l8" path="res://Sprites/3.png" id="2_y82fn"]
[ext_resource type="Texture2D" uid="uid://c6vk2u1huq7b8" path="res://Sprites/GoodArrow.png" id="3_hsgmq"]
[ext_resource type="PackedScene" uid="uid://bdv03821t1fbq" path="res://Scenes/UI/rhythm_note.tscn" id="4_6yd2o"]
[ext_resource type="Script" path="res://Scripts/rhythm.gd" id="4_gfr0l"]
[ext_resource type="PackedScene" uid="uid://dcglolmwry002" path="res://Scenes/UI/miss_popup.tscn" id="5_gu8r3"]
[ext_resource type="Script" path="res://Scripts/dialogue.gd" id="5_tw8ck"]
[ext_resource type="PackedScene" uid="uid://bjpoyliyupyqp" path="res://Scenes/UI/dialogue_option.tscn" id="6_gsqgo"]
[ext_resource type="PackedScene" uid="uid://brdheh51l3qks" path="res://Scenes/UI/bad_popup.tscn" id="6_ju5jo"]
[ext_resource type="PackedScene" uid="uid://y4luavrw6fox" path="res://Scenes/UI/okay_popup.tscn" id="7_arxmi"]
[ext_resource type="PackedScene" uid="uid://cer4k85kawh0k" path="res://Scenes/UI/good_popup.tscn" id="8_58pgq"]
[ext_resource type="PackedScene" uid="uid://bml6s31gf1mpy" path="res://Scenes/UI/great_popup.tscn" id="9_ft756"]
[ext_resource type="Texture2D" uid="uid://dpnyebe4b1d1a" path="res://Sprites/cauldron.png" id="12_cikpx"]
[ext_resource type="PackedScene" uid="uid://dtgldgmvfjpqr" path="res://Scenes/UI/npc_dialogue_box.tscn" id="12_ha5er"]
[ext_resource type="Texture2D" uid="uid://b4l75ixqp7660" path="res://Sprites/PumpkinNote1.png" id="12_i0q81"]
[ext_resource type="Texture2D" uid="uid://d2ufvqqxskipr" path="res://Sprites/BadArrow.png" id="13_nnqw2"]
[ext_resource type="Script" path="res://Scripts/cutscene.gd" id="15_sro5w"]
[ext_resource type="Script" path="res://Scripts/DynamicMusicPlayer.gd" id="16_43nax"]

[sub_resource type="Gradient" id="Gradient_vbo6e"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(0.821789, 0.821789, 0.821789, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_lrsc3"]
gradient = SubResource("Gradient_vbo6e")

[sub_resource type="Gradient" id="Gradient_vumdn"]
offsets = PackedFloat32Array(1)
colors = PackedColorArray(1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_bpxxe"]
gradient = SubResource("Gradient_vumdn")

[sub_resource type="Gradient" id="Gradient_8locq"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(0, 0, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_8ypnh"]
gradient = SubResource("Gradient_8locq")

[sub_resource type="Gradient" id="Gradient_q28l7"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(0.924369, 0.19816, 0.252588, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_nhl5c"]
gradient = SubResource("Gradient_q28l7")

[node name="TutorialLevel" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_u1iya")
level = ExtResource("2_anosn")

[node name="Background" type="TextureRect" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.0156863, 0.0156863, 0.0470588, 0.580392)

[node name="PortraitContainer" type="MarginContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 150
theme_override_constants/margin_top = 0
theme_override_constants/margin_right = 150
theme_override_constants/margin_bottom = 150

[node name="OpponentPortrait" type="TextureRect" parent="PortraitContainer"]
custom_minimum_size = Vector2(250, 400)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 8
texture = ExtResource("2_y82fn")
expand_mode = 3

[node name="RatingAnimRect" type="TextureRect" parent="PortraitContainer/OpponentPortrait"]
texture_filter = 1
layout_mode = 1
offset_left = -19.0
offset_top = 33.0
offset_right = 45.0
offset_bottom = 97.0
texture = ExtResource("3_hsgmq")
expand_mode = 1

[node name="PlayerPortrait" type="TextureRect" parent="PortraitContainer"]
custom_minimum_size = Vector2(250, 400)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
texture = ExtResource("2_y82fn")
expand_mode = 3
flip_h = true

[node name="Rhythm" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_gfr0l")
note_scene = ExtResource("4_6yd2o")
max_note_distance = 40.0
miss_popup = ExtResource("5_gu8r3")
bad_popup = ExtResource("6_ju5jo")
okay_popup = ExtResource("7_arxmi")
good_popup = ExtResource("8_58pgq")
great_popup = ExtResource("9_ft756")

[node name="ColorRect" type="ColorRect" parent="Rhythm"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -5.0
offset_top = -383.0
offset_right = 5.0
offset_bottom = 227.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 1, 1, 0.301961)

[node name="ColorRect2" type="ColorRect" parent="Rhythm/ColorRect"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -5.0
offset_top = -80.0
offset_right = 5.0
grow_horizontal = 2
grow_vertical = 0
color = Color(0.787759, 0.787759, 0.787759, 1)

[node name="ColorRect3" type="ColorRect" parent="Rhythm/ColorRect"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -5.0
offset_top = -52.0
offset_right = 5.0
offset_bottom = -24.0
grow_horizontal = 2
grow_vertical = 0

[node name="TargetCenter" type="Marker2D" parent="Rhythm/ColorRect/ColorRect3"]
position = Vector2(5, 15.5)

[node name="NoteTargetVisual" type="Sprite2D" parent="Rhythm/ColorRect/ColorRect3/TargetCenter"]
texture_filter = 1
scale = Vector2(1.5, 1.5)
texture = ExtResource("12_i0q81")

[node name="PopupCenter" type="Marker2D" parent="Rhythm/ColorRect/ColorRect3"]
position = Vector2(49, 15.5)

[node name="NoteSpawnPoint" type="Marker2D" parent="Rhythm/ColorRect"]
position = Vector2(5, 16.5)

[node name="Cauldron" type="TextureRect" parent="Rhythm/ColorRect"]
texture_filter = 1
custom_minimum_size = Vector2(128, 128)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -158.0
offset_top = -31.5
offset_right = -30.0
offset_bottom = 96.5
grow_horizontal = 2
grow_vertical = 0
texture = ExtResource("12_cikpx")
expand_mode = 1

[node name="Notes" type="Control" parent="Rhythm"]
anchors_preset = 0

[node name="ClearedNotes" type="Control" parent="Rhythm"]
anchors_preset = 0

[node name="Dialogue" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_tw8ck")
dialogue_option_scene = ExtResource("6_gsqgo")
good_rating_texture = ExtResource("3_hsgmq")
meh_rating_texture = SubResource("GradientTexture1D_lrsc3")
bad_rating_texture = ExtResource("13_nnqw2")

[node name="NpcDialogueBox" parent="Dialogue" instance=ExtResource("12_ha5er")]
layout_mode = 0
offset_left = 57.0
offset_top = 402.0
offset_right = 526.0
offset_bottom = 549.0

[node name="RespondTimeLeftBar" type="TextureProgressBar" parent="Dialogue/NpcDialogueBox"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 29.0
offset_top = -25.0
offset_right = -35.0
offset_bottom = -16.0
grow_horizontal = 2
grow_vertical = 0
step = 0.0
value = 41.6
nine_patch_stretch = true
texture_progress = SubResource("GradientTexture1D_bpxxe")

[node name="RandomPopupContainer" type="Control" parent="Dialogue"]
anchors_preset = 0
offset_left = 613.0
offset_top = 101.0
offset_right = 1110.0
offset_bottom = 589.0

[node name="Cutscene" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("15_sro5w")

[node name="NpcDialogueBox" parent="Cutscene" instance=ExtResource("12_ha5er")]
layout_mode = 0
offset_left = 57.0
offset_top = 402.0
offset_right = 526.0
offset_bottom = 549.0

[node name="PlayerDialogueBox" parent="Cutscene" instance=ExtResource("12_ha5er")]
layout_mode = 0
offset_left = 622.0
offset_top = 403.0
offset_right = 1091.0
offset_bottom = 550.0

[node name="HealthMarginContainer" type="MarginContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 45
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 45
theme_override_constants/margin_bottom = 30

[node name="HealthBar" type="TextureProgressBar" parent="HealthMarginContainer"]
layout_mode = 2
size_flags_vertical = 0
step = 0.0
value = 100.0
nine_patch_stretch = true
stretch_margin_top = 20
stretch_margin_bottom = 20
texture_under = SubResource("GradientTexture1D_8ypnh")
texture_progress = SubResource("GradientTexture2D_nhl5c")

[node name="DynamicMusicPlayer" type="AudioStreamPlayer" parent="."]
script = ExtResource("16_43nax")

[editable path="Dialogue/NpcDialogueBox"]
